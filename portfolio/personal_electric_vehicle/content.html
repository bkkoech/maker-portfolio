<!DOCTYPE HTML>
<!--
	Phantom by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Personal Electric Vehicle</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
	</head>
	<body>
		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<div class="inner">

							<!-- Logo -->
								<a href="../engineering.html" class="logo">
									<span class="symbol"><img src="images/logo.svg" alt="" /></span><span class="title">Back to Engineering</span>
								</a>

							<!-- Nav -->
								<nav>
									<ul>
										<li><a href="#menu">Menu</a></li>
									</ul>
								</nav>

						</div>
					</header>

				<!-- Menu -->
					<nav id="menu">
						<h2>Menu</h2>
						<ul>
							<li><a href="index.html">Home</a></li>
							<li><a href="generic.html">Ipsum veroeros</a></li>
							<li><a href="generic.html">Tempus etiam</a></li>
							<li><a href="generic.html">Consequat dolor</a></li>
							<li><a href="elements.html">Elements</a></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">
						<div class="inner">
							<h1>Personal Electric Vehicle</h1>
							<span class="image main"><img src="images/pic13.jpg" alt="" /></span>
							<h1>Collobarative project between Harvard and Hong Kong Unversity of Scienc and Technology.</h1>
							<h4>
								<br/>Date: June 2017 - July 2017
								<br/>Program : Harvard X HKUST International Design experience
								<br/> Location: Hong Kong and Harvard
								<br/>Software, Tools, Equipment: Arduino, Autodesk build space machine shop tools
								<br/>Team members and contributers: Billy Koech, Ashlyn Fraham, Bryant Huggins, Emily Wu, Adrian Chow 
							</h4>

							<p>The program requested participants of the Harvard X HKUST International Design Experience to design and construct a Personal Electric Vehicle(PEV) within the budget of  USD 1500 and within the time constraint of 7 weeks that satisfies the following requirements:
								<ul>
									<li> Consume the least amount of energy without compromising functionality.</li> 
									<li> Meet the minimum safety requirements for the driver</li>
									<li> Should comfortably fit every team member individually. </li>
							</p>
							<p>Members of the team came up with the following problem statement:
								Considering desired functions, it is critical that the PEV should be safe, stable and energy efficient and it should be manufacturable within the seven weeks’ time constraint.
							</p>
							
							<p>Team Cardi went through a process of alternativa analysis to conceptualized the design of the PEV. The design of the PEV was then divided into the following parts in order for the concept to be realized:
							<ol>
								<li>Chassis</li>
								<li>Suspension</li>
								<li>Steering</li>
								<li>Transmission</li>
								<li>Braking</li>
								<li>Electrical System and Software</li>
							</ol></p>

							<h1>Parts that I was in charge of:</h1>
							<p>Below are the parts that I contributed to. It's writted in layman terms to accommodate a general audience. More details and specifics on the design can be found below in the design section.</p>
							<h2>1. Collaboration on the design of the transmission</h2>

							<p>The design of the transmission involved the modification of the a bicycle derailleur so as to leverage it’s multi-speed functionality and it’s ease of implementation. The derailleur in this case gave the gives the PEV up to 7 speeds.
							</p>

							<h2>2. Brake pedals design</h2>
							<p>
							The design of the pedals was driven by the following requirements:
							<ul>
								<li>The user experience when pressing on the pedal</li>
								<li>Sufficient mechanical resistance to provide tactile feedback when stepping on the pedal</li>
								<li>Short amount of time for the pedal to return to the unengaged position.</li>	
							</ul>							
							</p>
							<p>
							The design arrived at after iteration involved mounting the pedal on a U bracket through a hole on one side of the pedal. Another hole was drilled on the other side of the U bracket for the purpose of attaching a potentiometer. 
							</p>
							
							<h2>3. Brake assembly </h2>
							<p>
							Designed mount for the brake disc and sourced parts for the brake assembly. Designed mount for brake assembly.
							</p>
							<h2>4. Machine shop experience</h2>
							<p>
							Machining parts from steel and aluminum using band saws, hand drills, bench drills, hammers and pipe cutters.
							</p>


							<h1>Design</h1>


							<h2>1. Chassis</h2>

							<p>The chassis was the structure that supported the rest of the components of the PEV. The final chassis design was an aluminum rectangular chassis with crossing support beams that was divided into a section for the transmission and a section for sitting and steering with a shock dampening system situated in between the sections.
							This section will outline the evolution of the chassis design over the weeks, detailing our considerations during the creation and decision on the form and material of the chassis.</p>
							<p>
							In the beginning of our design it was necessary to establish constraints for our vehicle design. The first constraint discussed was the amount of wheels that our PEV would have. The design challenge necessitated that our vehicle have no less than three wheels, so, eliminating designs with five wheels and higher because of their lack of predicted functionality in providing any extra stability and their complication of the design, our decision narrowed between the choice of having three or four wheels. A four wheel vehicle would have the advantages of greater stability, but it requires differential for transmission system which complicates the design of transmission. therefore a three wheel design, with two front wheel for steering and one rear wheel for transmission was chosen. The second constraint is dimension, the dimension of the vehicle should be enough for a person to sit, but can not be too large otherwise it will increase the weight greatly. The third constraint will be the material type, aluminium and steel will be two material for choosing due to availability. Steel and aluminium both provides good strength but steel was heavier. Therefore, aluminium was chosen for the main chassis frame to minimize the weight of the frame.
							</p>
							<p>
							The frame have go through an iterative design process: First, an general shape (rectangle plate) was made for the frame and the load was applied to find where load is sustained in such frame in Autodesk fusion 360 simulation. Then the shape of the frame was changed according to the simulation results to remove redundant materials. Using such results as an reference, with other considerations (consideration for installation of the seats, ease of manufacturing), the final shape of the frame was produced. The frame was made by 1.5 in* 1.5 in hollow square cross-section aluminium bars, connected by L and T brackeds made from steel plates.
							</p>



							<h2>2. Suspension</h2>
							<p>To prevent the vertical force from the uneven ground, we decided to have suspension system and two main advantages can then be gained. One is protecting the structures of our vehicle, another is increasing the traction between the tire and the ground. The first iteration of the suspension system was built by a chassis that allowed rotation in the middle back of the vehicle with two shock absorbers on it. Due to the ease of manufacturing, we used L brackets to attach the shock absorbers on the chassis. 
							However, this design neglected the effect of the arm and the fact that a higher original position for suspension components is necessary. The result of this design was therefore failed. Under this scenario, we had three possible solutions, using stronger shock absorbers, shortening the length of the car (both front and back will be fine) and raising the original position for suspension components, and we picked up the first and the third. It took lots of time for cutting the aluminum bar and drilling new holes, so we discarded the second choice as it was unrealistic to us. To handle this challenge, we asked one person having the average weight (154 pounds) of our team sit on the vehicle and then measured the compression under this load. Then we used Fusion 360 to find a geometric solution such that when the spring compressed under this specific load (from 10 to 9 inches), the whole chassis is exactly at the horizontal position. After these process, we designed and customized longer L brackets to attach the shock absorber that helps raise the position of suspension components. 
							</p>



							<h2>3. Steering</h2>
							<p>
							Two main steering mechanisms have been proposed and considered, namely Bell-crank and rack-and-pinion. In considering the ease of manufacture and maintenance, bell-crank steering was chosen to be implemented due to its simplistic mechanism and minimal requirement for purchased parts.
							<p>
							A major change to the design of the steering system was made to the steering shaft support. Originally using a ball joint rod end screwed to a steel plate as the shaft support, the idea was abnegated due to later discovery of having too much degree of freedom and the late arrival of the purchased rod end. Instead, the final design used a bent steel plate drilled with a ⅝” hole for holding the steering shaft was screwed on a aluminum stock diagonally cut, which was fixed on the chassis with 2 T-brackets on the sides. This method, although sacrificing smoothness of control due to friction between the steering shaft and the plate hole, gave satisfactory performance.
							</p>




							<h2>4. Transmission</h2>
							<p>
							The main objective of this part is to design a mechanical transmission that transmits power from the motor to the powering wheels, such that the whole vehicles can move forward and backward. The basic design idea of this part is the implementation of bike gear shifting mechanism (used in bikes) into the transmission system, since a real vehicle often have gear shifting functions. The reason that the gear shifting function is we would like to see the actual performance of gear shifting in PEVs and investigate the methods of implementation of gear shifting in PEVs.
 
							The main components of bike gears consist of a cassette, a chain wheel and a derailleur. Power is transmitted from the chain wheel to the cassette by the bicycle chains. As the cassette consists of concentric gears with different teeth number. By shifting the chains to different planes (where the gears of cassette are on) using derailleur, the chains can be shifted to gears with different teeth number on the derailleur, such that the gear ratio is changed in this process. Instead of using both rear and front derailleur, only rear derailleur is used to simplify the design in the transmission system.
 
							After the main design direction was chosen, some estimation about transmission is carried out. The first question is whether the torque is enough to start the vehicle and accelerate the vehicle. To achieving the desired acceleration, the following equation (eq. #1) must be satisfied (derived from F=ma, note that this equation is only an approximation): {equation picture goes here}
							</p>
							<p>
							Where m is the mass of the vehicle, R is the radius of the wheel, T_input is the input torque,  T_friction  is the frictional torque produced by bearings and  is the resultant acceleration. Assuming T_friction = 0, the calculated result requires an overall gear ratio from 2.28 to 9.13 for required acceleration range (shown in presentation). The actual gear ratio should be higher due to frictional term, the reason that is not included in the calculation in presentation will be explained in part 5D.
							</p>
							<p>
							The second question is about the gear ratio required for continuous running of motor. With respect to the prescribed linear speed range (mentioned in presentation), the motor should be geared down in a way such that when the vehicle is running at the continuous speed range (after accelerated to the speed range), the motor RPM falls in its continuous RPM range also. Having the radius of the wheel and the linear speed range, RPM range of the wheel can be found; knowing the continuous RPM range of motor from its datasheet, the required gear ratio range (7.26-11.2) can be obtained. From the bicycle gear, the maximum gear ratio that can be obtained is only 1.45 (cassette 34 teeth; chainring 22 teeth) due to a limited choice of chainrings. As a result, the gear ratio needs to be further increased.
							</p>
							<p>
							To get the desired results, different designed was considered. The first design option is using a pair of gears to gear up the torque, the second design option involves multiple pair of gears, the third design option involves worm gears (and worm gear boxes) and the fourth design option involves having an ordinary gearbox (with gear pairs inside). The second option is rejected as it is essentially equivalent with having an ordinary gearbox, however more gear set means more misalignments of each gear axis and more space being used by the gears. Although The third design option can provide a very high gear ratio, it is rejected because of two reasons: the worm gearbox is very expensive, it can be as high as around 300 USD from McMaster Carr, buying a separate worm gear set is possible in terms of budget, but accurate alignment of gears is difficult (different input and output axis direction). For the first option, a very large gear is needed for this high gear ratio, which is difficult to be found in the market (the large one is 120 teeth, paired up with a small gear of 16 teeth). The large size of the gears increases the weight greatly, also the misalignment issues persists when it is compared with ordinary gearboxes. Therefore, a gearbox from Vex robotics (two stage reduction, 9.52 gear ratio) is chosen.
							</p>
							<p>
							The major change of the transmission system in terms of design is the addition of gearbox. Before the motor was changed, we did not realize that at continuous operation of motor, the speed of motor needs to gear down greatly. Also, the starting torque was inaccurately estimated. As a result, option one was chosen before we came to the final design: since finding a gear pair to attain a gear ratio of 3 is not difficult (teeth 16 & 48).
							</p>
							<p>
							To connect the rear powering wheel to the shaft, a shaft with keyway was chosen such that the shaft rotates with the wheel. The shaft is mounted on the chassis by two shaft housings, as shown in Fig. 2. A disk brake is also mounted on the shaft.
							{fina transmission picture goes here}
							</p>
							<p>
							The resultant schematic is: the motor is directly connected to the input of the gearbox, and the output shaft of gearbox is directly connected to the chainring of the bike gear.
							</p>
							<p>
							There are still many challenges after the gearbox was chosen. As the input shaft diameter of the gearbox is 8mm, but the shaft diameter of the motor is 1/2-inch, it cannot be directly connected. The solution is finding a machinable shaft coupling, and the hole on one side was machined to 8mm. Another challenge is the mounting of chainring on the 1/2-inch hex output shaft of the gearbox. Using the existing hole on the chainring, it was mounted on a custom aluminum part, and the part is mounted on the hex shaft. Furthermore, the mounting of cassette body on the rear shaft is another challenge. The inner diameter of cassette hub is far larger than the rear shaft, and the inner surface is not a smooth cylindrical surface. A custom steel part is made such that it is wielded to the inner surface of the hub, and the steel part is mounted on the shaft. Details of manufacture and assembly of transmission will be discussed in part 4D.
							</p>




							<h2>5. Braking</h2>
							<p>
							The original design for the braking system involves the use a hydraulic braking system for efficient transmission of the braking  force. However, the parts needed to build the hydraulic system are too expensive and beyond the budget for the braking system thus we sought an inexpensive but efficient design. The result of this iteration was the disc brake and brake callipers braking system that involved transfer of mechanical force via a metallic braking cable that resembles a string in a pipe. This design proved convenient because it was easy to calibrate the brake in order to arrive at an optimum setting for the transmission of the braking force to the drivetrain.
							</p>
							<h4>A. Disc brake</h4>
							<p>
							The disc brake that we purchased online could not fit directly onto the shaft thus we designed a mount for the shaft as shown in the figure below. The mount was designed with four holes for bolts which would be attached onto the disc brake. At the center of the mount was a keyed hole for mounting onto the drivetrain shaft. 
							Possible improvements: we made the disc brake mount out of aluminum, but steel would have been the better choice because steel  is stronger than aluminum when it comes to resistance of deformation due to the forces from the motion of the drivetrain.
							</p>
							<h4>B. Pedals and user input</h4>
							<p>
							To receive input from the driver of the PEV, pedals were designed with key slots for attachment to potentiometers. Turning the pedals would then turn the potentiometers and send a signal to the arduino for processing. We initially designed the pedals to have a L shaped mount made of steel L bar, and mounted the potentiometers on the chassis using hot glue, but that was not ideal because hot glue was easily detachable from the surface of the chassis. We thus redesigned the pedal mount and used an aluminum U channel. the U channel had two holes on either side of the wall through which we inserted the shaft of the pedal and the shaft of the potentiometer.
							</p>





							<h2>6. Electrical System and Software </h2>

							<h4>A. Electrical System</h4>
							<p>
							The main drivetrain was driven by a ½ HP DC electric motor, which was controlled by a DRV8703 H-Bridge Motor Controller. This motor controller is able to interface with both SPI commands and PWM signals, but our controller was driven through PWM. The PWM signals controlled both the speed and direction of the motor, and these signals were produced by an Adafruit Feather M0.  The DRV8703 has two pins for motor control, an enable and phase pin. Depending on the input to these two pins, the motor is set into one of four modes: forward, reverse, coast, or brake.
							</p>
							<p>
							Both the speed and the direction of the motor are determined by user inputs, as is true in a commercial car. Two potentiometers are mounted to the physical brake and accelerator  so that when they are pressed the potentiometer resistance will be read by the Feather M0, and an increasing or decreasing PWM signal will be sent to the motor controller. As an additional safety component, the motor cannot be driven unless the motor enable switch is flipped to the on position, which is located on the driver’s left side. 
							</p>

							<h4>B. Software</h4>
							<p>
							The software control system is implemented on the Arduino Feather m0. The main objective is to take inputs from the 2 pedals and output motor PWM, hence controlling the speed of the motor. In addition, a monitoring system is also designed for recording the vehicle speed, motor temperature, and finally displaying all the information through an FeatherWing OLED screen.
							</p>

							<p>The usage of potentiometers for measuring pedal angles instead of encoders facilitates the overall software system design since each potentiometer only requires 1 analog input into the Arduino rather than having to use SPI if encoders were used instead which requires complicated control and timing over all the SPI peripherals. The angle value obtained from the potentiometers would then be transformed into a motor PWM value to be sent to the motor controller, which ultimately controls the motor speed.
							</p>
							<p>
							The monitoring system takes in a temperature value from the DS18B20 temperature sensor mounted on the motor, the RPM from the AS5048A magnetic rotary encoder mounted on the rear drive shaft and outputs the values to the FeatherWing OLED screen. Both the temperature sensor and the OLED screen provide external libraries, DS18D20 uses the 1-wire protocol and provides its own calculation library “Dallas Temperature”, while the FeatherWing OLED uses “Adafruit_SSD1306” provided by the production company Adafruit. The AS5048A does not have any exclusive libraries but uses SPI for communication, thus, calculation of the RPM is done by concatenating 2 raw input values followed by mapping to obtain the expected degree of rotation. The angle is then used to calculate the revolution per second by counting the number of sudden degree jumps from above 200° to below 100° indicating a full revolution plus the partial revolution through current angle of rotation. Scaling the value by a factor of 60 yields the RPM of the drive shaft.
							</p>


							<h1>Assembly Process</h1>
							<h2>Chassis</h2>
							<h2>Steering</h2>
							<h2>Suspension</h2>
							<h2>Transmission</h2>
							<h2>Braking</h2>

							<h1>Challenges</h1>
							<h2>Steering</h2>
							<h2>Suspension</h2>
							<h2>Transmission</h2>
							<h2>Braking</h2>

							<h1>Outlook and Improvement for the Future</h1>
							<h2>Power steering and autonomous driving</h2>
							<h2>Transmission </h2>
							<h2>General project planning</h2>


						</div>
					</div>

				<!-- Footer -->
					<footer id="footer">
						<div class="inner">
							<section>
								<h2>Get in touch</h2>
								<form method="post" action="#">
									<div class="field half first">
										<input type="text" name="name" id="name" placeholder="Name" />
									</div>
									<div class="field half">
										<input type="email" name="email" id="email" placeholder="Email" />
									</div>
									<div class="field">
										<textarea name="message" id="message" placeholder="Message"></textarea>
									</div>
									<ul class="actions">
										<li><input type="submit" value="Send" class="special" /></li>
									</ul>
								</form>
							</section>
							<section>
								<h2>Follow</h2>
								<ul class="icons">
									<li><a href="#" class="icon style2 fa-twitter"><span class="label">Twitter</span></a></li>
									<li><a href="#" class="icon style2 fa-facebook"><span class="label">Facebook</span></a></li>
									<li><a href="#" class="icon style2 fa-instagram"><span class="label">Instagram</span></a></li>
									<li><a href="#" class="icon style2 fa-dribbble"><span class="label">Dribbble</span></a></li>
									<li><a href="#" class="icon style2 fa-github"><span class="label">GitHub</span></a></li>
									<li><a href="#" class="icon style2 fa-500px"><span class="label">500px</span></a></li>
									<li><a href="#" class="icon style2 fa-phone"><span class="label">Phone</span></a></li>
									<li><a href="#" class="icon style2 fa-envelope-o"><span class="label">Email</span></a></li>
								</ul>
							</section>
							<ul class="copyright">
								<li>&copy; Untitled. All rights reserved</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
							</ul>
						</div>
					</footer>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>

	</body>
</html>